<div 
  id="main-text"
  style="font-size: 4em; cursor: pointer;" 
  onclick="postMessageToIframe()"
>First Page</div>
<iframe 
  id="chatbot"
  style="width: 100%; height: 100%"  
  allow="autoplay; camera; display-capture; encrypted-media; fullscreen; microphone; midi; payment; picture-in-picture; speaker;" 
  src="http://localhost:8080/room/53?secret=PoC"
></iframe>
<script>
  function postMessageToIframe() {
    const el = document.getElementById('chatbot');
    if (el && el.contentWindow) {
      el.contentWindow.postMessage('Hello there!', 'http://localhost:8080');
    }
  }
  function getMessageFromIframe({ data, origin }) {
    console.log({ data, origin })
    if(typeof data == "object") {
      const { method, params } = data;
      if(!method) {
        
      } else if(method=="redirect") {
        const { location } = params
        window.location.href = location
      } else if(method=="resizeIframe") {
        const { width, height } = params
        const el = document.getElementById('chatbot');
        el.style.width = width
        el.style.height = height
      } else if(method=="changeTime") {
        const { time } = params
        console.log({ time })
        const el = document.getElementById('main-text');
        el.textContent = time;
      }
    }
    
  }
  window.addEventListener('message', getMessageFromIframe)
</script>
